# CHC-866

Aug 21 11:57:25: Response zu StartTransactionRequest invalid
Aug 21 08:42:04
Aug 21 08:41:47


Hauefige Reconnects aktuell hierdurch: NOS

```
Aug 20 03:10:00 TCP-00922 python3[1536]: INFO     ocpp_client      :1128 shutting down ocpp client
Aug 20 03:10:00 TCP-00922 python3[1536]: INFO     ocpp_client      :125  send BootNotification to backend (model: TwinCharger Pro, vendor: ChargeHere, firmware version: 1.4.9 0.6.4 1.1.2) ...
Aug 20 03:10:00 TCP-00922 python3[1536]: INFO     ocpp_client      :133  connected to backend. Requested heartbeat interval: 60s
Aug 20 03:10:00 TCP-00922 python3[1536]: INFO     ocpp_client      :180  send Heartbeat to backend ...
Aug 20 03:10:00 TCP-00922 python3[1536]: INFO     ocpp_client      :225  sending StatusNotificationPayload to backend (connector_id: 1, error_code: NoError, status: Available, timestamp: 2025-08-20T01:10:00.833Z, info: None, vendor_id: Ch
Aug 20 03:10:00 TCP-00922 python3[1536]: INFO     ocpp_client      :225  sending StatusNotificationPayload to backend (connector_id: 2, error_code: NoError, status: Available, timestamp: 2025-08-20T01:10:00.836Z, info: None, vendor_id: Ch
Aug 20 03:10:00 TCP-00922 python3[1536]: INFO     ocpp_client      :660  <GetConfiguration> request received
Aug 20 03:10:00 TCP-00922 python3[1536]: WARNING  oaksystem_client :343  2: failed to generate OCMF - status: 916 - response: OCMF already generated
Aug 20 03:10:00 TCP-00922 python3[1536]: ERROR    ocpp_client      :504  failed to generate OCMF -> generating StopTransaction without OCMF. Exception: 2: failed to generate OCMF - status: 916 - response: OCMF already generated
Aug 20 03:10:00 TCP-00922 python3[1536]: INFO     ocpp_client      :524  send StopTransaction (meter stop: 12482, transaction id: 52, id tag: 04751582f77180, reason: EVDisconnected, timestamp: 2025-08-20T01:10:00.904Z) to backend ...
Aug 20 03:10:01 TCP-00922 python3[1536]: INFO     ocpp_client      :660  <GetConfiguration> request received
Aug 20 03:10:01 TCP-00922 python3[1536]: WARNING  charge_point     :337  Received a CALLError: <CallError - unique_id=5004ab3f-0f91-4281-8972-f04a347a46c1, error_code=InternalError, error_description=An unexpected error occurred., error_d
Aug 20 03:10:01 TCP-00922 python3[1536]: ERROR    ocpp_runner      :98   websocket failed while trying to connect to ws://172.23.0.1/ocpp/16/TCP_00922. Exception: 'NoneType' object has no attribute 'id_tag_info'
Aug 20 03:10:01 TCP-00922 python3[1536]: Traceback (most recent call last):
Aug 20 03:10:01 TCP-00922 python3[1536]:   File "/home/nos/nooaksystem/ocpp_runner.py", line 85, in main
Aug 20 03:10:01 TCP-00922 python3[1536]:     await self._connect(charge_point_type=charge_point_type)
Aug 20 03:10:01 TCP-00922 python3[1536]:   File "/home/nos/nooaksystem/ocpp_runner.py", line 62, in _connect
Aug 20 03:10:01 TCP-00922 python3[1536]:     await self._ocpp_cp.start()
Aug 20 03:10:01 TCP-00922 python3[1536]:   File "/home/nos/nooaksystem/ocpp_client.py", line 105, in start
Aug 20 03:10:01 TCP-00922 python3[1536]:     await asyncio.gather(super().start(), self.send_boot_notification())
Aug 20 03:10:01 TCP-00922 python3[1536]:   File "/home/nos/nooaksystem/ocpp_client.py", line 161, in send_boot_notification
Aug 20 03:10:01 TCP-00922 python3[1536]:     self.check_session(1),
Aug 20 03:10:01 TCP-00922 python3[1536]:   File "/home/nos/nooaksystem/ocpp_client.py", line 535, in check_session
Aug 20 03:10:01 TCP-00922 python3[1536]:     f"StopTransaction confirmation received ("
Aug 20 03:10:01 TCP-00922 python3[1536]: AttributeError: 'NoneType' object has no attribute 'id_tag_info'
Aug 20 03:10:01 TCP-00922 python3[1536]: INFO     ocpp_runner      :74   reconnecting to websocket, reconnect delay: 0.1s
Aug 20 03:10:01 TCP-00922 python3[1536]: INFO     ocpp_client      :1128 shutting down ocpp client
Aug 20 03:10:01 TCP-00922 python3[1536]: INFO     ocpp_client      :125  send BootNotification to backend (model: TwinCharger Pro, vendor: ChargeHere, firmware version: 1.4.9 0.6.4 1.1.2) ...

```

Gleichzeitig im OCPPProxy

```
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     server           :264  connection closed
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     server           :648  connection open
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     web_socket       :56   new connection recognized: matched protocols ocpp1.6 - websocket id: daf78ae9-0944-4fe4-964f-1ec4257c3aba
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     interruptible_task:71   Starting task set BackendClients ...
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     interruptible_task:32   Starting ConnectorStateLoggingTask for connector TCP_00922:1: task...
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     interruptible_task:32   Starting LoadControlConnectorStateLoggingTask for connector TCP_00922:1: task...
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     interruptible_task:32   Starting ConnectorStateLoggingTask for connector TCP_00922:2: task...
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     interruptible_task:32   Starting LoadControlConnectorStateLoggingTask for connector TCP_00922:2: task...
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     charge_point_communicator:107  TCP_00922: BootNotificationPayload received from charge point (charge_point_model: TwinCharger Pro, charge_point_vendor: ChargeHere, charge_box_serial_numbe
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     charge_point_communicator:114  TCP_00922: sending BootNotificationPayload to charge point (current_time: 2025-08-20T01:10:00.815Z, interval: 60, status: Accepted) ...
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     ocpp_charge_point_connection:151  TCP_00922: synchronizing configuration ...
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     charge_point_communicator:114  TCP_00922: sending GetConfigurationPayload to charge point (key: [<OCPPConfigKeys.heartbeat_interval: 'HeartbeatInterval'>, <OCPPConfigKeys.meter_value_samp
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: ERROR    backend_client   :178  TCP_00922:1: connection to backend closed. Exception: server rejected WebSocket connection: HTTP 403
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: Traceback (most recent call last):
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:   File "/usr/lib/python3/dist-packages/ocppproxy/adapters/backend_client/ocpp/backend_client.py", line 139, in _connect_to_backend
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:     subprotocols=[Subprotocol("ocpp1.6")],
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:   File "/usr/lib/python3/dist-packages/websockets/legacy/client.py", line 642, in __aenter__
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:     return await self
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:   File "/usr/lib/python3/dist-packages/websockets/legacy/client.py", line 659, in __await_impl_timeout__
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:     return await asyncio.wait_for(self.__await_impl__(), self.open_timeout)
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:   File "/usr/lib/python3.7/asyncio/tasks.py", line 416, in wait_for
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:     return fut.result()
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:   File "/usr/lib/python3/dist-packages/websockets/legacy/client.py", line 671, in __await_impl__
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:     extra_headers=protocol.extra_headers,
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:   File "/usr/lib/python3/dist-packages/websockets/legacy/client.py", line 332, in handshake
Aug 20 03:10:00 fritz ch-ocppproxy[1892]:     raise InvalidStatusCode(status_code, response_headers)
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     backend_client   :124  TCP_00922:1: reconnecting to websocket, reconnect delay: 0.2s
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     charge_point_communicator:107  TCP_00922: GetConfigurationPayload received from charge point (configuration_key: [KeyValue(key='HeartbeatInterval', readonly=False, value='60'), KeyValue(k
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     ocpp_charge_point_connection:186  TCP_00922: synchronizing configuration done.
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     backend_client   :106  TCP_00922:1: connecting to backend ws://10.142.27.16/api/ocppj16/6264...
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     charge_point_communicator:114  TCP_00922: sending GetConfigurationPayload to charge point (key: [<CustomOCPPConfigKeys.connector_meter_id: 'MeterId'>]) ...
Aug 20 03:10:00 fritz ch-ocppproxy[1892]: INFO     charge_point_communicator:107  TCP_00922: StatusNotificationPayload received from charge point (connector_id: 1, error_code: NoError, status: Available, timestamp: 2025-08-20T01:10:00.833
Aug 20 03:10:01 fritz ch-ocppproxy[1892]: INFO     charge_point_communicator:107  TCP_00922: GetConfigurationPayload received from charge point (configuration_key: [KeyValue(key='MeterId', readonly=True, value='1.33124609, 2.33124611')], 
Aug 20 03:10:01 fritz ch-ocppproxy[1892]: INFO     charge_point_communicator:107  TCP_00922: StatusNotificationPayload received from charge point (connector_id: 2, error_code: NoError, status: Available, timestamp: 2025-08-20T01:10:00.836
Aug 20 03:10:01 fritz ch-ocppproxy[1892]: INFO     charge_point_communicator:107  TCP_00922: StopTransactionPayload received from charge point (meter_stop: 12482, timestamp: 2025-08-20T01:10:00.904Z, transaction_id: 52, reason: EVDisconne
Aug 20 03:10:01 fritz ch-ocppproxy[1892]: INFO     backend_client   :353  TCP_00922:1: adding StopTransactionPayload to offline queue
Aug 20 03:10:01 fritz ch-ocppproxy[1892]: INFO     web_socket       :79   TCP_00922: websocket connection to charge point closed ok.
Aug 20 03:10:01 fritz ch-ocppproxy[1892]: INFO     web_socket       :91   TCP_00922: stopping charge point ...
Aug 20 03:10:01 fritz ch-ocppproxy[1892]: INFO     web_socket       :94   closing websocket connection for charge point TCP_00922 - websocket id: daf78ae9-0944-4fe4-964f-1ec4257c3aba
Aug 20 03:10:01 fritz ch-ocppproxy[1892]: INFO     server           :264  connection closed
```

